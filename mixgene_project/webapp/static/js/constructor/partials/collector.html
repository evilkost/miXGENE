<div ng-controller="CollectorCtrl">
    <hr >
    <div class="row">

        <!--<h3 >-->
            <!--<span class="label label-default"> Collect results </span>-->
        <!--</h3>-->
        <div class="col-xs-6 col-lg-4">
            <h3 style="text-align: center">
                <span class="label label-default"> Outputs to collect</span>
            </h3>

            <ul class="list-group">
                <li  class="list-group-item"
                     ng-repeat="(name, bound_var) in block.collector_spec.bound"
                     ng-init="var=access.vars_by_key[bound_var.pk] "
                     >
                    <b>{$ name $}</b>: {$ var.title $}

                    <a class="pull-right glyphicon glyphicon-remove-circle"
                       ng-if="!access.mode.ro"
                       ng-click="remove_from_collector(name)">
                    </a>
                </li>
            </ul>
        </div>


        <div class="col-xs-6 col-lg-6" ng-if="!access.mode.ro">
            <div class="row">
                <div class="form-group col-xs-4">
                    <label class="control-label">
                        Output name
                        <!--{$ block.collector_spec.new.name $}-->
                    </label>
                    <input type="text" class="form-control"
                           ng-model="block.collector_spec.new.name" />
                </div>


                <div class="form-group col-xs-4">
                    <label class="control-label">
                        Variable to bind
                    </label>

                    <select class="form-control"
                            ng-model="block.collector_spec.new.scope_var"
                            ng-options="
                                option.pk as option.title for option
                                in access.vars
                                    |filter:access.fnFilterVarsByScope([block.sub_scope_name])
                            "
                    >
                    </select>
                </div>
                <div ng-if="show_add_button()"
                        class="col-xs-4">
                    <div class="form-group col-xs-4">
                        <label class="control-label">
                        </label>

                        <button class="btn btn-primary" ng-click="add_var()">
                            <span class="glyphicon glyphicon-plus"></span>
                            Add output to result collection
                        </button>
                    </div>
                </div>
            </div>

        </div>



    </div>
    <div class="row">

    </div>
</div>