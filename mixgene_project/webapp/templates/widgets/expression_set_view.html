{% extends "widgets/base_block_template.html" %}

{% block panel_heading %}
Detail view for Expression Set
{% endblock panel_heading %}


{% block panel_body %}
{% if exp_block.errors %}
    <div class="alert alert-danger">
        <ul class="list-unstyled">
            {% for error in exp_block.errors %}
            <li>
                {{ error.msg|default:error }}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <form class="form form-horizontal form-ajax-submit"
          action="{% url 'update_block' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="block_uuid" value="{{ block.uuid }}" />
        <input type="hidden" name="exp_id" value="{{ ctx.exp_id }}" />

        <div class="col-lg-9">
            {% if exp_block.state == "created" %}
                {% if exp_block.variable_options %}
                <div class="form-group">
                    <label class="col-sm-2 control-label">Select variable</label>
                    <div class="col-sm-10">
                        <select name="variable_name" class="form-control">
                            {% for uuid, alias, field_name in  exp_block.variable_options %}
                            <option value = "{{uuid}}:{{field_name}}">
                                {{alias}} -> {{ field_name}}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                {% endif %}
            {% endif %}
        </div>



        <div class="col-lg-3">
            {% for action_code, action_title in exp_block.get_available_user_action %}

            <button type="submit" class="btn btn-default btn-block"
                    name="action" value="{{ action_code }}">
                {{ action_title }}
            </button>

            {% endfor %}
        </div>
    </form>

{% endblock panel_body %}
