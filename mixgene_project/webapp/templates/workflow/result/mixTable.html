{% load static %}

<!-- expecting django variable  result -->

<!-- div class="well" -->

<div class="panel panel-default">
    <div class="panel-heading">
        <h3>{{ result.title }}</h3>
    </div>
    <div class="panel-body">
        <!-- p>Working units {{ result.working_units }} </p -->

        <!-- div class="well" -->
            <div id="{{ result.uuid }}"></div>
        <!-- /div -->
        <script type="text/javascript">
            $(function() {
                $(document).ready(function () {
                    var dataurl = '{% url 'get_csv_as_table' exp.pk result.filename %}';

                    function onDataReceived(response) {
                        $("#{{ result.uuid }}").html(response);
                    }
                    $.ajax({
                        url: dataurl,
                        type: "POST",
                        data: {
                            csrfmiddlewaretoken: '{{ csrf_token }}',
                            has_col_names: '{{ result.has_col_names }}',
                            has_row_names: '{{ result.has_row_names }}',
                            delimiter: '{{ result.csv_delimiter }}',
                            rows_num_limit: 150
                        },
                        dataType: "html",
                        success: onDataReceived
                    });
                });
            });
        </script>
    </div>
</div>
